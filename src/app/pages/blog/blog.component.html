<section class="py-24 px-6 md:px-20 bg-white dark:bg-neutral-900">
  <div class="max-w-6xl mx-auto">
    <!-- Header -->
    <div class="text-center max-w-3xl mx-auto mb-12">
      <h2 class="text-4xl md:text-5xl font-bold tracking-tight text-neutral-900 dark:text-white">
        {{ i18n.translations().blog.title }}
      </h2>
      <p class="mt-4 text-neutral-600 dark:text-neutral-400 text-lg leading-relaxed">
        {{ i18n.translations().blog.subtitle }}
      </p>
    </div>

    <!-- Estado: Cargando -->
    @if (isLoading()) {
    <div class="py-16">
      <div class="flex flex-col items-center gap-4">
        <div
          class="h-10 w-10 rounded-full border-2 border-neutral-200 border-t-neutral-900 dark:border-neutral-700 dark:border-t-white animate-spin"
          aria-hidden="true"
        ></div>
        <p class="text-neutral-600 dark:text-neutral-400 font-medium">{{ i18n.translations().blog.loading }}</p>
      </div>
    </div>
    }

    <!-- Estado: Error -->
    @if (error() && !isLoading()) {
    <div
      class="py-12 rounded-3xl border border-red-200 dark:border-red-700 bg-red-50 dark:bg-red-900/20 p-8"
      role="alert"
    >
      <div class="flex flex-col items-center text-center gap-4 max-w-2xl mx-auto">
        <p class="text-sm font-semibold text-red-700 dark:text-red-200">
          {{ i18n.translations().blog.error }}
        </p>

        <p class="text-red-700 dark:text-red-200">
          {{ error() }}
        </p>

        <div class="flex flex-col sm:flex-row gap-3 mt-2">
          <button
            (click)="loadPosts()"
            class="inline-flex h-11 items-center justify-center rounded-xl bg-red-600 px-6 text-white font-medium transition hover:bg-red-700"
          >
            {{ i18n.translations().blog.retry }}
          </button>
          <span class="text-sm text-red-600 dark:text-red-300 self-center">
            Mostrando caché si hay datos disponibles.
          </span>
        </div>
      </div>
    </div>
    }

    <!-- Estado: Sin posts -->
    @if (!isLoading() && !error() && posts().length === 0) {
    <div class="py-16">
      <div class="text-center max-w-2xl mx-auto">
        <p class="text-neutral-600 dark:text-neutral-400 text-lg">
          {{ i18n.translations().blog.noArticles }}
        </p>
        <p class="mt-2 text-neutral-500 dark:text-neutral-500">
          Publicaré notas técnicas a medida que avance con proyectos y aprendizajes en producción.
        </p>
      </div>
    </div>
    }

    <!-- Posts cargados exitosamente -->
    @if (!isLoading() && posts().length > 0) {
    <div class="grid gap-6 md:grid-cols-2">
      @for (post of posts(); track post.id) {
      <article
        class="group rounded-3xl border border-neutral-200 dark:border-neutral-700 bg-white dark:bg-neutral-900 p-7 shadow-sm hover:shadow-xl transition-all hover:-translate-y-1"
      >
        <!-- Meta (opcional) -->
        <div class="flex items-center justify-between mb-3">
          <span
            class="inline-flex items-center rounded-full border border-neutral-200 dark:border-neutral-700 px-3 py-1 text-xs font-medium text-neutral-600 dark:text-neutral-400"
          >
            {{ 'post.category' }}
          </span>

          <span class="text-xs text-neutral-500 dark:text-neutral-500">
            {{ 'post.readTime' }} min read
          </span>
        </div>

        <h3
          class="text-2xl font-semibold tracking-tight text-neutral-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"
        >
          {{ post.title }}
        </h3>

        <p class="mt-3 text-neutral-600 dark:text-neutral-400 leading-relaxed">
          {{ post.description }}
        </p>

        <div class="mt-6">
          <a
            [routerLink]="['/blog', post.slug]"
            [attr.aria-label]="'Leer artículo: ' + post.title"
            class="inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 font-medium"
          >
            {{ i18n.translations().blog.readArticle }}
            <span aria-hidden="true" class="transition-transform group-hover:translate-x-1">→</span>
          </a>
        </div>
      </article>
      }
    </div>
    }

    <!-- Indicador de estado al pie -->
    @if (!isLoading() && posts().length > 0) {
    <div
      class="mt-10 text-sm text-neutral-500 dark:text-neutral-500 text-center"
    >
      {{ posts().length }} {{ i18n.translations().blog.articlesLoaded }}
    </div>
    }
  </div>
</section>
