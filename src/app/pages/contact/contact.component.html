<section class="relative overflow-hidden">
  <!-- Fondo premium sutil -->
  <div class="absolute inset-0 -z-10">
    <div
      class="absolute -top-24 left-1/2 h-72 w-72 -translate-x-1/2 rounded-full bg-neutral-200/40 blur-3xl dark:bg-neutral-800/40"
    ></div>
    <div
      class="absolute -bottom-24 left-1/4 h-72 w-72 rounded-full bg-neutral-200/40 blur-3xl dark:bg-neutral-800/40"
    ></div>
  </div>

  <div class="container py-16 md:py-24">
    <header class="mx-auto max-w-2xl text-center">
      <p class="text-sm font-medium tracking-wide text-neutral-500 dark:text-neutral-400">
        Contacto
      </p>

      <h1
        class="mt-2 text-4xl md:text-5xl font-extrabold tracking-tight text-neutral-900 dark:text-neutral-50"
      >
        Hablemos.
      </h1>

      <p class="mt-4 text-base md:text-lg text-neutral-600 dark:text-neutral-300">
        Si ten√©s una propuesta, idea o quer√©s colaborar, dejame un mensaje. Respondo normalmente en
        <span class="font-semibold">24‚Äì48h</span>.
      </p>
    </header>

    <div class="mx-auto mt-10 max-w-2xl">
      <form
        (submit)="onSubmit(); $event.preventDefault()"
        class="relative rounded-3xl border border-neutral-200/70 bg-white/70 p-6 md:p-10 shadow-[0_20px_60px_-30px_rgba(0,0,0,0.25)] backdrop-blur-xl dark:border-neutral-800/70 dark:bg-neutral-950/40"
      >
        <!-- Error -->
        <div
          *ngIf="formError()"
          class="error-shake mb-6 rounded-2xl border border-red-200/70 bg-red-50/60 p-4 text-left dark:border-red-900/60 dark:bg-red-950/30"
          role="alert"
          aria-live="polite"
        >
          <p class="text-sm font-semibold text-red-700 dark:text-red-200">
            {{ formError() }}
          </p>
        </div>

        <!-- Success -->
        <div
          *ngIf="formStatus() === 'success'"
          class="success-message mb-6 rounded-2xl border border-emerald-200/70 bg-emerald-50/60 p-4 text-left dark:border-emerald-900/60 dark:bg-emerald-950/30"
          role="status"
          aria-live="polite"
        >
          <p class="text-sm font-semibold text-emerald-700 dark:text-emerald-200">
            ‚úÖ Mensaje enviado. Te respondo pronto.
          </p>
        </div>

        <div class="grid gap-5">
          <!-- Nombre -->
          <div>
            <label
              class="mb-2 block text-sm font-semibold text-neutral-800 dark:text-neutral-200"
              for="name"
            >
              Nombre
            </label>

            <input
              type="text"
              id="name"
              autocomplete="name"
              [value]="name()"
              (input)="onInput('name', $event)"
              [disabled]="formStatus() === 'sending' || formStatus() === 'success'"
              class="w-full rounded-2xl border border-neutral-200 bg-white/80 px-4 py-3 text-neutral-900 shadow-sm outline-none transition-all placeholder:font-medium placeholder:text-neutral-500 focus:border-neutral-400 focus:bg-white focus:ring-4 focus:ring-neutral-200/60 disabled:cursor-not-allowed disabled:opacity-60 dark:border-neutral-800/50 dark:bg-neutral-900/50 dark:text-neutral-50 dark:placeholder:text-neutral-400 dark:focus:border-neutral-600 dark:focus:bg-neutral-900/80 dark:focus:ring-neutral-800/60"
              [class.border-red-500]="nameError()"
              [attr.aria-invalid]="!!nameError()"
              [attr.aria-describedby]="nameError() ? 'name-error' : null"
              placeholder="Tu nombre"
            />

            <p
              *ngIf="nameError()"
              id="name-error"
              class="mt-2 text-xs font-medium text-red-600 dark:text-red-300"
            >
              {{ nameError() }}
            </p>
          </div>

          <!-- Email -->
          <div>
            <label
              class="mb-2 block text-sm font-semibold text-neutral-800 dark:text-neutral-200"
              for="email"
            >
              Email
            </label>

            <input
              type="email"
              id="email"
              autocomplete="email"
              [value]="email()"
              (input)="onInput('email', $event)"
              [disabled]="formStatus() === 'sending' || formStatus() === 'success'"
              class="w-full rounded-2xl border border-neutral-200 bg-white/80 px-4 py-3 text-neutral-900 shadow-sm outline-none transition-all placeholder:font-medium placeholder:text-neutral-500 focus:border-neutral-400 focus:bg-white focus:ring-4 focus:ring-neutral-200/60 disabled:cursor-not-allowed disabled:opacity-60 dark:border-neutral-800/50 dark:bg-neutral-900/50 dark:text-neutral-50 dark:placeholder:text-neutral-400 dark:focus:border-neutral-600 dark:focus:bg-neutral-900/80 dark:focus:ring-neutral-800/60"
              [class.border-red-500]="emailError()"
              [attr.aria-invalid]="!!emailError()"
              [attr.aria-describedby]="emailError() ? 'email-error' : null"
              placeholder="tu@email.com"
            />

            <p
              *ngIf="emailError()"
              id="email-error"
              class="mt-2 text-xs font-medium text-red-600 dark:text-red-300"
            >
              {{ emailError() }}
            </p>
          </div>

          <!-- Mensaje -->
          <div>
            <label
              class="mb-2 block text-sm font-semibold text-neutral-800 dark:text-neutral-200"
              for="message"
            >
              Mensaje
            </label>

            <textarea
              id="message"
              rows="6"
              [value]="message()"
              (input)="onInput('message', $event)"
              [disabled]="formStatus() === 'sending' || formStatus() === 'success'"
              class="w-full resize-none rounded-2xl border border-neutral-200 bg-white/80 px-4 py-3 text-neutral-900 shadow-sm outline-none transition-all placeholder:font-medium placeholder:text-neutral-500 focus:border-neutral-400 focus:bg-white focus:ring-4 focus:ring-neutral-200/60 disabled:cursor-not-allowed disabled:opacity-60 dark:border-neutral-800/50 dark:bg-neutral-900/50 dark:text-neutral-50 dark:placeholder:text-neutral-400 dark:focus:border-neutral-600 dark:focus:bg-neutral-900/80 dark:focus:ring-neutral-800/60"
              [class.border-red-500]="messageError()"
              [attr.aria-invalid]="!!messageError()"
              [attr.aria-describedby]="messageError() ? 'message-error' : null"
              placeholder="Contame en qu√© puedo ayudarte‚Ä¶"
            ></textarea>

            <div class="mt-2 flex items-center justify-between">
              <p
                *ngIf="messageError()"
                id="message-error"
                class="text-xs font-medium text-red-600 dark:text-red-300"
              >
                {{ messageError() }}
              </p>

              <p class="text-xs text-neutral-500 dark:text-neutral-400">M√≠nimo 10 caracteres</p>
            </div>
          </div>

          <!-- CTA -->
          <div class="mt-2 flex flex-col items-center gap-3">
            <button
              type="submit"
              [disabled]="!formValid() || formStatus() === 'sending' || formStatus() === 'success'"
              class="inline-flex w-full items-center justify-center gap-2 rounded-2xl px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-neutral-900/10 transition bg-neutral-900 hover:bg-neutral-800 active:scale-[0.99] disabled:cursor-not-allowed disabled:opacity-60 dark:bg-white dark:text-neutral-900 dark:hover:bg-neutral-100"
            >
              <span *ngIf="formStatus() === 'sending'" class="inline-flex items-center gap-2">
                <span class="inline-block animate-spin">‚è≥</span>
                Enviando‚Ä¶
              </span>
              <span *ngIf="formStatus() !== 'sending'">
                {{ formStatus() === 'success' ? '‚úÖ Enviado' : 'Enviar mensaje' }}
              </span>
            </button>

            <button
              *ngIf="formStatus() === 'error'"
              type="button"
              (click)="onSubmit()"
              class="inline-flex w-full items-center justify-center gap-2 rounded-2xl border border-neutral-200 px-6 py-3 text-sm font-semibold text-neutral-900 transition hover:bg-neutral-50 dark:border-neutral-800 dark:text-neutral-100 dark:hover:bg-neutral-900/40"
            >
              üîÑ Reintentar
            </button>

            <p class="text-xs text-neutral-500 dark:text-neutral-400 text-center">
              Alternativa r√°pida: LinkedIn (recomendado) o email profesional.
            </p>
          </div>
        </div>
      </form>
    </div>
  </div>
</section>
